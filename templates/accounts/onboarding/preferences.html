{% extends 'accounts/onboarding/base.html' %}

{% block step_content %}
<form id="onboarding-form" method="post" action="{% url 'accounts:onboarding_complete_step' step_id=step.id %}" novalidate>
    {% csrf_token %}
    
    <div class="nhsuk-form-group">
        <fieldset class="nhsuk-fieldset" aria-describedby="preferences-hint">
            <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--l">
                <h2 class="nhsuk-fieldset__heading">Your Preferences</h2>
            </legend>
            
            <div class="nhsuk-hint" id="preferences-hint">
                Customize your experience with these optional settings.
            </div>
            
            <div class="nhsuk-form-group">
                <label class="nhsuk-label" for="preferred_language">
                    Preferred language
                </label>
                <select class="nhsuk-select" id="preferred_language" name="preferred_language">
                    <option value="en" {% if form_data.preferred_language == 'en' %}selected{% endif %}>English</option>
                    <option value="cy" {% if form_data.preferred_language == 'cy' %}selected{% endif %}>Cymraeg (Welsh)</option>
                    <option value="gd" {% if form_data.preferred_language == 'gd' %}selected{% endif %}>GÃ idhlig (Scottish Gaelic)</option>
                </select>
            </div>
            
            <div class="nhsuk-form-group">
                <label class="nhsuk-label" for="timezone">
                    Timezone
                </label>
                <select class="nhsuk-select" id="timezone" name="timezone">
                    <option value="Europe/London" {% if form_data.timezone == 'Europe/London' %}selected{% endif %}>London (GMT/BST)</option>
                    <option value="Europe/Edinburgh" {% if form_data.timezone == 'Europe/Edinburgh' %}selected{% endif %}>Edinburgh (GMT/BST)</option>
                    <option value="Europe/Dublin" {% if form_data.timezone == 'Europe/Dublin' %}selected{% endif %}>Dublin (GMT/IST)</option>
                    <option value="Europe/Belfast" {% if form_data.timezone == 'Europe/Belfast' %}selected{% endif %}>Belfast (GMT/BST)</option>
                </select>
            </div>
            
            <div class="nhsuk-form-group">
                <fieldset class="nhsuk-fieldset" aria-describedby="notification-hint">
                    <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m">
                        <h3 class="nhsuk-fieldset__heading">Notification preferences</h3>
                    </legend>
                    
                    <div class="nhsuk-hint" id="notification-hint">
                        Choose how you'd like to receive notifications about your referrals and matches.
                    </div>
                    
                    <div class="nhsuk-checkboxes">
                        <div class="nhsuk-checkboxes__item">
                            <input class="nhsuk-checkboxes__input" id="email_notifications" name="email_notifications" type="checkbox" value="true" checked>
                            <label class="nhsuk-label nhsuk-checkboxes__label" for="email_notifications">
                                Email notifications
                            </label>
                            <div class="nhsuk-hint nhsuk-checkboxes__hint">
                                Receive important updates via email
                            </div>
                        </div>
                        
                        <div class="nhsuk-checkboxes__item">
                            <input class="nhsuk-checkboxes__input" id="sms_notifications" name="sms_notifications" type="checkbox" value="true">
                            <label class="nhsuk-label nhsuk-checkboxes__label" for="sms_notifications">
                                SMS notifications
                            </label>
                            <div class="nhsuk-hint nhsuk-checkboxes__hint">
                                Receive urgent updates via text message
                            </div>
                        </div>
                        
                        <div class="nhsuk-checkboxes__item">
                            <input class="nhsuk-checkboxes__input" id="in_app_notifications" name="in_app_notifications" type="checkbox" value="true" checked>
                            <label class="nhsuk-label nhsuk-checkboxes__label" for="in_app_notifications">
                                In-app notifications
                            </label>
                            <div class="nhsuk-hint nhsuk-checkboxes__hint">
                                See notifications when you log in
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            
            <div class="nhsuk-form-group">
                <fieldset class="nhsuk-fieldset" aria-describedby="privacy-hint">
                    <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--m">
                        <h3 class="nhsuk-fieldset__heading">Privacy settings</h3>
                    </legend>
                    
                    <div class="nhsuk-hint" id="privacy-hint">
                        Control how your information is used for matching and communication.
                    </div>
                    
                    <div class="nhsuk-radios">
                        <div class="nhsuk-radios__item">
                            <input class="nhsuk-radios__input" id="privacy_standard" name="privacy_level" type="radio" value="standard" checked>
                            <label class="nhsuk-label nhsuk-radios__label" for="privacy_standard">
                                Standard privacy
                            </label>
                            <div class="nhsuk-hint nhsuk-radios__hint">
                                Share basic information for matching purposes
                            </div>
                        </div>
                        
                        <div class="nhsuk-radios__item">
                            <input class="nhsuk-radios__input" id="privacy_enhanced" name="privacy_level" type="radio" value="enhanced">
                            <label class="nhsuk-label nhsuk-radios__label" for="privacy_enhanced">
                                Enhanced privacy
                            </label>
                            <div class="nhsuk-hint nhsuk-radios__hint">
                                Limit information sharing to essential matching only
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </fieldset>
    </div>
    
    <div class="nhsuk-inset-text">
        <span class="nhsuk-u-visually-hidden">Information: </span>
        <p>You can change these preferences at any time in your account settings.</p>
    </div>
</form>
{% endblock %}
